<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" id="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>香奈儿腕表与高级珠宝</title>
  <style>
    body {
      font-family: 'PingFang SC, -apple-system, BlinkMacSystemFont, sans-serif';
    }

    #loadingContainer {
      width: 100%;
      height: 100%;
      position: absolute;
      background-color: black;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background-color: white;
      background-position: center;
      background-size: cover;
    }

    #loadingIcon {
      width: 56px;
      height: 56px;
      object-fit: contain;
      animation: rotating 1s linear infinite;
    }

    @keyframes rotating {
      from {
        transform: rotate(0deg);
      }

      to {
        transform: rotate(360deg);
      }
    }

    #text {
      font-style: normal;
      font-weight: 400;
      font-size: 14px;
      line-height: 24px;
      display: flex;
      align-items: center;
      text-align: center;
      margin-top: 14px;
      color: #333333;
    }
  </style>
</head>

<body style="margin:0;padding:0;">
  <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
  <script>
    const bewh = 'before window.innerHeight = ' + window.innerHeight
    console.log('c before window.innerHeight = ' + window.innerHeight)
    const origscale = document.documentElement.clientWidth / 375
    let changeInnerHeight1
    let windowSize = {
      width: document.documentElement.clientWidth,
      height: document.documentElement.clientHeight,
      ratio: window.devicePixelRatio,
      scale: document.documentElement.clientWidth / 375
    };
    const changeViewportContent = (scale) => {
      let viewportContent = `width= 375`
      if (scale)
        viewportContent += `, initial-scale=${windowSize.scale}, maximum-scale=${windowSize.scale}, minimum-scale=${windowSize.scale}, user-scalable=no`
      document.getElementById('viewport').content = viewportContent;
    }
    const checkViewportInnerHeightLegal = () => {
      for (let i = 0; i < 10; i++) {
        if (windowSize.height > window.innerHeight * windowSize.scale)
          windowSize.scale += 0.001
        else
          break
      }
      changeViewportContent(windowSize.scale);
    }
    changeViewportContent();
  </script>
  <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
  <div id="YMK-module"></div>
  <div id="loadingContainer">
    <img id="loadingIcon" src='data:image/svg+xml;base64,PHN2ZyBpZD0iZWNqdXBMWjl4MDExIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIg0Kdmlld0JveD0iMCAwIDU2IDU2IiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+DQo8ZGVmcz4NCiAgPHJhZGlhbEdyYWRpZW50IGlkPSJlY2p1cExaOXgwMTItZmlsbCIgY3g9IjAiIGN5PSIwIiByPSIxIiBzcHJlYWRNZXRob2Q9InBhZCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiDQogICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgtMjUuMDA1OSAxOS4yOTU0IC0zMC44Mzk1IC0zOS45NjY1IDQ0LjgwODkgMTMuODUxNykiPg0KICAgIDxzdG9wIGlkPSJlY2p1cExaOXgwMTItZmlsbC0wIiBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjMDAwIiAvPg0KICAgIDxzdG9wIGlkPSJlY2p1cExaOXgwMTItZmlsbC0xIiBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9InJnYmEoMCwwLDAsMC4wMSkiIC8+DQogIDwvcmFkaWFsR3JhZGllbnQ+DQo8L2RlZnM+DQo8cGF0aCBpZD0iZWNqdXBMWjl4MDEyIg0KICBkPSJNOC4xNDQzNywyMS4xNDQ3QzEwLjk4NiwxMi45MTI5LDE4LjgwMjUsNywyOCw3YzExLjU5OCwwLDIxLDkuNDAyLDIxLDIxYzAsMTAuNzYzMS04LjA5NzIsMTkuNjM1LTE4LjUzMjIsMjAuODU2NWwxLjQ1NzgsMS44MDk4QzQyLjc1ODEsNDguODAzNSw1MSwzOS4zNjQyLDUxLDI4QzUxLDE1LjI5NzUsNDAuNzAyNSw1LDI4LDVDMTguMzYyMyw1LDEwLjEwOTEsMTAuOTI3OCw2LjY4NzU2LDE5LjMzNjNsMS40NTY4MSwxLjgwODRaIg0KICBvcGFjaXR5PSIwLjYiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0idXJsKCNlY2p1cExaOXgwMTItZmlsbCkiIGZpbGwtcnVsZT0iZXZlbm9kZCIgLz4NCjwvc3ZnPg=='/>
    </div>
    <div id="text">将镜头对准您的手腕</div>
  </div>
  <div id="timed"></div>
  <script>
    const setApikey = (d, k) => {
      var s = d.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = 'https://plugins-media.youcamapi.cn/c1022240-dev/sdk.js?apiKey=' + k;
      var x = d.getElementsByTagName('script')[0];
      x.parentNode.insertBefore(s, x);
    }

    let initData = {}

    const getInitData = async () => {
      changeInnerHeight1 = window.innerHeight
      const paras = location.search.split("=")[1]
      if (!paras)
        return
      const data = JSON.parse(decodeURIComponent(paras))
      setApikey(document, data.api_key)
      initData = {
        countlyAppKey: data.app_countly_key,
        customerId: data.customer_id,
        appVersion: data.m_appversion,
        initGuid: data.init_guid,
        listGuid: data.list_guid,
        appId: data.app_id,
        redirectPage: data.result_page,
        autoOpenHandAR: true,
        debug: data.debug,
      };
    }

    const onOpenModule = () => {
      document.getElementById('loadingContainer').style.display = 'none'
    }

    window.addEventListener('load', getInitData)
    window.addEventListener('load', checkViewportInnerHeightLegal)

    window.ymkAsyncInit = function () {
      window.YMK.addEventListener('opened', onOpenModule)
      window.YMK.init({
        ...initData
      });
      window.YMK.addEventListener('loaded', () => {
        const vConsole = new window.VConsole();
        console.log(bewh)
        console.log('origin scale = ' + origscale)
        console.log('now scale = ' + windowSize.scale)
        console.log('before first change window.innerHeight = ' + changeInnerHeight1)
        console.log('the last window.innerHeight = ' + window.innerHeight)
        console.log('the last window.outerHeight = ' + window.outerHeight)
        console.log('window.innerHeight * windowSize.scale = ' + window.innerHeight * windowSize.scale)
        console.log('document.documentElement.clientHeight =' + document.documentElement.clientHeight)
        console.log('windowSize.height =' + windowSize.height)
        console.log('v24');
      })
    };
  </script>
</body>

</html>